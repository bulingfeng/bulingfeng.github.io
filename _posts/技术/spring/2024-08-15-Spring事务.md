---
title: "Spring事务"
subtitle: "spring事务"
layout: post
author: "bulingfeng"
header-style: text
tags:
- spring
---

## Spring的事务的连接是在何时创建的呢？

Spring开始事务的数据库连接是在代理类开始执行第一个代理方法的时候进行创建的链接，这样才能保证执行标注事务的方法都使用同一个事务链接，这样也就能保证这些sql在同一个事务当中了。

伪代码如下：

```java
public class UserServiceProxy implements UserSerivce{
		private UserSerivce userService;
		
		public void test(){
			// 1.事务管理器建立数据库连接
			// 2.conn.autocommit=false;关闭自动提交
			userService.test();
			// 3.没有抛异常 conn.commit;  抛异常conn.rollback
		}
}
```

