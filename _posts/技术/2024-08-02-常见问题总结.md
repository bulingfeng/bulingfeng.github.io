---
title: "常见问题总结"
subtitle: "常见问题总结"
layout: post
author: "bulingfeng"
header-style: text
tags:
- java基础
---

## 关于ThreadLocal问题

ThreadLocal在使用结束的时候，要强制调用remove方法来进行把对应线程持有的ThreadLocalMap的引用给释放掉，否则会引起OOM。

1. tomcat为共享线程池，然后ThreadLocal没有主动调用remove方法导致内存泄露
2. 没有主动调用remove方法，由于tomcat是线程池复用，所以造成同一个线程中的用户信息不一致。比如一个线程的上下文信息，刚开始是A用户信息，结果一会变成了B用户的信息（线程池内线程复用造成的）

